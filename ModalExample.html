<!DOCTYPE HTML>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Some Example</title>
<style>
.modalMask{
top: 0;
left: 0;
width: 100%;
height: 100%;
position: fixed;
border: 1px solie red;
background: gray;
opacity: 70%
}
.modal{
top: 0;
left: 0;
right: 0;
bottom: 0;
min-width:400px;
width: 500px;
min-height: 300px;
height: 300px;
margin: auto;
position: fixed;
border: 2px solid black;
background: white;
}
.closeButton{
float: right;
//padding: 2px 7px;
cursor: pointer;
margin-right: 5px;
margin-top: 5px;
font-size: 14pt;
}
</style>
<script>

var ds={
"modals" : []
};

var $$$={
"modals": {}
};

$$$.modals.show=function(mid){
let modal=null;
for(let x=0;x<ds.modals.length;x++)
{
if(ds.modals[x].getContentId()==mid)
{
modal=ds.modals[x];
break;
}
}
if(modal==null) return;
if(modal) modal.show();
};


//this is class
function Modal(contentReference)
{
var objectAddress=this; 
this.getContentId=function()
{
return contentReference.id;
}
this.afterOpening=null;
this.afterClosing=null;
this.beforeOpening=null;
this.beforeClosing=null;
let contentParentReference=contentReference.parentElement;
let contentIndex=0
for(;contentParentReference.children.length;contentIndex++)
{
if(contentReference==contentParentReference.children[contentIndex]) break;
}
let modalMaskDivision=document.createElement('div');
modalMaskDivision.style.display="none";
let modalDivision=document.createElement('div');
modalDivision.style.display="none";
modalMaskDivision.classList.add('modalMask');
modalDivision.classList.add('modal');
document.body.appendChild(modalMaskDivision);
document.body.appendChild(modalDivision);

let headerDivision=document.createElement('div');
headerDivision.style.right="0";
headerDivision.style.padding="5px";
headerDivision.style.background="pink";
headerDivision.style.height="40px";
modalDivision.appendChild(headerDivision);

if(contentReference.hasAttribute("size"))
{
let size=contentReference.getAttribute("size");
let xpos=size.indexOf("x");
if(xpos==-1) xpos=size.indexOf("X");
if(xpos==-1) throw "In case of modal size should be specified as widthxheight";
if(xpos==0 || xpos==size.length-1) throw "In case of modal size should be specified as widthxheight";
let width=size.substring(0,xpos);
let height=size.substring(xpos+1);
modalDivision.style.width=width+"px";
modalDivision.style.height=height+"px";
modalDivision.style['min-width']=width+"px";
modalDivision.style['min-height']=height+"px";
}
else
{
modalDivision.style.width="400px";
modalDivision.style.height="300px";
}
if(contentReference.hasAttribute("header"))
{
let header=contentReference.getAttribute("header");
headerDivision.innerHTML=header;
}

if(contentReference.hasAttribute("maskColor"))
{
let maskColor=contentReference.getAttribute("maskColor");
modalMaskDivision.style.background=maskColor;
}

if(contentReference.hasAttribute("modalBackgroundColor"))
{
let modalBackgroundColor=contentReference.getAttribute("modalBackgroundColor");
modalDivision.style.background=modalBackgroundColor;
}

let contentDivision=document.createElement('div');
contentDivision.style.right="0";
contentDivision.style.padding="5px";
contentDivision.style.height=(modalDivision.style.height.substring(0,modalDivision.style.height.length-2)-(headerDivision.style.height.substring(0,headerDivision.style.height.length-2)*2+30))+"px";
contentDivision.style.background="purple";
contentDivision.style.overflow="auto";
contentReference.remove();
contentDivision.appendChild(contentReference);
contentReference.style.display="block";
contentReference.style.visiblity="visible";
modalDivision.appendChild(contentDivision);

let footerDivision=document.createElement('div');
footerDivision.style.right="0";
footerDivision.style.left="0";
footerDivision.style.background="red";
footerDivision.style.padding="5px";
footerDivision.style.position="absolute";
footerDivision.style.bottom="0";
footerDivision.style.height="40px";
modalDivision.appendChild(footerDivision);

if(contentReference.hasAttribute("footer"))
{
let footer=contentReference.getAttribute("footer");
footerDivision.innerHTML=footer;
}
if(contentReference.hasAttribute("afterOpening"))
{
let oo=contentReference.getAttribute("afterOpening");
//alert(eval(oo)); // whatever we pass to eval it considered regular expression to it and execute it
//example
//let k="c=10+20";
//eval(k);
//alert(c);
this.afterOpening=oo;
}

if(contentReference.hasAttribute("beforeOpening"))
{
let bo=contentReference.getAttribute("beforeOpening");
this.beforeOpening=bo;
}

if(contentReference.hasAttribute("afterClosing"))
{
let oc=contentReference.getAttribute("afterClosing");
this.afterClosing=oc;
}

if(contentReference.hasAttribute("beforeClosing"))
{
let bc=contentReference.getAttribute("beforeClosing");
this.beforeClosing=bc;
}


let closeButton;
if(contentReference.hasAttribute("closeButton"))
{
closeButton=contentReference.getAttribute("closeButton");
if(closeButton.toUpperCase()=='TRUE')
{
let closeButtonSpan=document.createElement('span');
closeButtonSpan.classList.add('closeButton');
let closeButtonMarker=document.createTextNode('X');
closeButtonSpan.appendChild(closeButtonMarker);
headerDivision.appendChild(closeButtonSpan);

closeButtonSpan.onclick=function(){
let closeModal=true;
if(objectAddress.beforeClosing)
{
closeModal=eval(objectAddress.beforeClosing);
}
if(closeModal)
{
modalMaskDivision.style.display="none";
modalDivision.style.display="none";
/*
if(contentIndex==contentParentReference.children.length) contentParentReference.appendChild(contentReference);
else
{
contentParentReference.insertBefore(contentReference,contentParentReference.children[contentIndex]);
}
*/
if(objectAddress.afterClosing) setTimeout(()=>{
eval(objectAddress.afterClosing);
},2);
}
};
}
}

this.show=function(){
let openModal=true;
if(this.beforeOpening)
{
openModal=eval(this.beforeOpening);
}
if(openModal)
{
modalMaskDivision.style.display="block";
modalDivision.style.display="block";
if(objectAddress.afterOpening) setTimeout(()=>{
eval(objectAddress.afterOpening);
},2);
}
};

let areaClose=contentReference.getAttribute('areaClose');
if(areaClose.toUpperCase()=="TRUE")
{
modalMaskDivision.onclick=()=>{
let closeModal=true;
if(objectAddress.beforeClosing)
{
closeModal=eval(objectAddress.beforeClosing);
}
if(closeModal)
{
modalMaskDivision.style.display="none";
modalDivision.style.display="none";
/*if(contentIndex==contentParentReference.children.length) contentParentReference.appendChild(contentReference);
else
{
contentParentReference.insertBefore(contentReference,contentParentReference.children[contentIndex]);
}*/
if(objectAddress.afterClosing) setTimeout(()=>{
eval(objectAddress.afterClosing);
},2);
}
};
}
}//Modal function ends here

function abOpened(){
alert('Modal will be opned');
}
function abClosed(){
alert('Modal will be closed');
}
//by this two events we can manuplate rateher our modal has to be open or not or close or not
function abBeforeOpening(){
alert('Modal with ab is about to be open');
return true;
}
function abBeforeClosing(){ 
alert('Modal with ab is about to be closed');
return true;
}


function createModal1()
{
//let modal=new Modal('ab');
//let modal=$$$('ab');
/*modal.onClose=function(){
alert('Modal will be closed');
};
modal.onOpen=function(){
alert('Modal will be opned');
};*/
$$$.modals.show("ab");

}

function createModal2()
{
$$$.modals.show("cd");
}

function loader()
{
let allElements=document.getElementsByTagName("*");
for(let i=0;i<allElements.length;i++)
{
let tag=allElements[i];
if(tag.hasAttribute("forModal"))
{
if(tag.getAttribute("forModal").toUpperCase()=="TRUE")
{
tag.setAttribute("forModal","false");
ds.modals[ds.modals.length]=new Modal(tag);
i--;
}
}
}
}

function xyz()
{
alert(document.getElementById("myTextBox"));
}

window.addEventListener('load',loader);

</script>
</head>
<body>
<button type='button' onClick='createModal1()'>show first modal</button>
<button type='button' onClick='createModal2()'>show Second modal</button>
<div id='ab' style='display:none' areaClose="true" forModal="true" size="450x300" header="Some heding" footer="Some footer" maskColor="#7C7B7B" modalBackgroundColor="white" closeButton="True" afterOpening=abOpened() beforeOpening=abBeforeOpening() afterClosing=abClosed() beforeClosing=abBeforeClosing()>
<h1>god is great</h1>
<input type='text' id='myTextBox' value="Great"><br>
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
Let me take the night, I love real easy
And I know that you'll still wanna see me
On the Sunday morning, music real loud
Let me love you while the moon is still out
Something in you, lit up heaven in me
The feeling won't let me sleep
'Cause I'm lost in the way you move, the way you feel
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One
One
One
One
I just wanna feel your skin on mine
Feel your eyes do the exploring
Passion in the message when you smile
Take my time
Something in you lit up heaven in me
The feeling won't let me sleep
'Cause I'm lost in the way you move, the way you feel
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One
One
One
One
See a wonderland in your eyes
Might need your company tonight
Something in you lit up heaven in me
The feeling won't let me sleep
'Cause I'm lost in the way you move, the way you feel
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One kiss is all it takes
Fallin' in love with me
Possibilities
I look like all you need
One
One
One
One
</div>
<div id='pqr' style='display:none' areaClose="true" forModal="false">
<h1>I am here the big dog big steper</h1>
</div>
<div id='cd' style='display:none' areaClose="false" forModal="true">
<h1>Ujjain is the city of gods</h1>
</div>
<button type='button' onclick='xyz()'>xyz</button>
</body>
</html>