<!DOCTYPE HTML>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Some Example</title>
<style>
.modalMask{
top: 0;
left: 0;
width: 100%;
height: 100%;
position: fixed;
border: 1px solie red;
background: gray;
opacity: 70%
}
.modal{
top: 0;
left: 0;
right: 0;
bottom: 0;
width: 500px;
min-width:500px;
height: 300px;
min-height: 300px;
margin: auto;
position: fixed;
border: 3px solid black;
background: white;
overflow : auto;
}
.closeButton{
float: right;
padding: 7px;
cursor: pointer;
}
</style>
<script>

var ds={
"modals" : []
};

function $$$(mid)
{
for(let x=0;x<ds.modals.length;x++)
{
if(ds.modals[x].getContentId()==mid) return ds.modals[x];
}
}

//this is class
function Modal(contentReference)
{
var objectAddress=this; //important for using where this will not work or we want object of this reference
//some property that can be used to decide is modal should be closed when user clicked outside of the modal area
this.getContentId=function()
{
return contentReference.id;
}
this.onOpen=null;
this.onClose=null;
//let contentId=aid;
//let contentReference=document.getElementById(aid);
let contentParentReference=contentReference.parentElement;
let contentIndex=0
for(;contentParentReference.children.length;contentIndex++)
{
if(contentReference==contentParentReference.children[contentIndex]) break;
}
let modalMaskDivision=document.createElement('div');
let modalDivision=document.createElement('div');
modalMaskDivision.classList.add('modalMask');
modalDivision.classList.add('modal');
let closeButtonSpan=document.createElement('span');
closeButtonSpan.classList.add('closeButton');
let closeButtonMarker=document.createTextNode('X');
closeButtonSpan.appendChild(closeButtonMarker);
modalDivision.appendChild(closeButtonSpan);
contentReference.remove();

this.show=function(){
modalDivision.appendChild(contentReference);
document.body.appendChild(modalMaskDivision);
document.body.appendChild(modalDivision);
if(this.onOpen) this.onOpen();
};

closeButtonSpan.onclick=function(){
contentReference.remove();
modalMaskDivision.remove();
modalDivision.remove();
/*if(contentIndex==contentParentReference.children.length) contentParentReference.appendChild(contentReference);
else
{
contentParentReference.insertBefore(contentReference,contentParentReference.children[contentIndex]);
}*/
if(objectAddress.onClose) objectAddress.onClose();
};

let areaClose=contentReference.getAttribute('areaClose');
if(areaClose=="true")
{
modalMaskDivision.onclick=()=>{
contentReference.remove();
modalMaskDivision.remove();
modalDivision.remove();
/*if(contentIndex==contentParentReference.children.length) contentParentReference.appendChild(contentReference);
else
{
contentParentReference.insertBefore(contentReference,contentParentReference.children[contentIndex]);
}*/
if(objectAddress.onClose) objectAddress.onClose();
};
}
}//Modal function ends here



function createModal1()
{
//let modal=new Modal('ab');
let modal=$$$('ab');
modal.onClose=function(){
alert('Modal will be closed');
};
modal.onOpen=function(){
alert('Modal will be opned');
};
modal.show();

}

function createModal2()
{
//let modal=new Modal('cd');
let modal=$$$('cd');
modal.onClose=function(){
alert('Modal will be closed');
};
modal.onOpen=function(){
alert('Modal will be opned');
};
modal.show();

}

function loader()
{
let allElements=document.getElementsByTagName("*");
for(let i=0;i<allElements.length;i++)
{
let tag=allElements[i];
if(tag.hasAttribute("forModal"))
{
if(tag.getAttribute("forModal").toUpperCase()=="TRUE") ds.modals[ds.modals.length]=new Modal(tag);
i--;
}
}
}

window.addEventListener('load',loader);

</script>
</head>
<body>
<button type='button' onClick='createModal1()'>show first modal</button>
<button type='button' onClick='createModal2()'>show Second modal</button>
<div id='ab' areaClose="true" forModal="true">
<h1>god is great</h1>
</div>
<div id='pqr' areaClose="true" forModal="TrUe">
<h1>I am here the big dog big steper</h1>
</div>
<div id='cd' areaClose="false" forModal="true">
<h1>Ujjain is the city of gods</h1>
</div>
</body>
</html>